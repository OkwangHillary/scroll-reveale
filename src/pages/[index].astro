---
import Layout from "../layouts/Layout.astro"
import Arrow from "../components/arrow.astro"
import medias from "../data.json"

export const getStaticPaths = async () => {
  return medias.map((media) => {
    return {
      params: { index: media.index.toString() },
      props: {
        media,
      },
    }
  })
}

const { media } = Astro.props
---

<Layout uid={`detail-${media.index}`} template="detail">
  <div class="details">
    <div class="details-data" data-text-animation>
      <div>
        <a href="/">
          <Arrow />
          <span>Index</span>
        </a>
      </div>
      <div>
        <p>{media.data}</p>
      </div>
      <div><p>{media.device}</p></div>
      <div>
        <a target="_blank" rel="noopener noreferrer" href={media.link}>
          {media.name}</a
        >
      </div>
    </div>
    <div class="details-container">
      <img
        data-flip-id="img"
        data-detail-media
        loading="eager"
        src={media.url}
        alt={`Image ${media.index}`}
      />
    </div>
  </div>
</Layout>
